<mxfile host="app.diagrams.net" modified="2025-06-13T04:20:00.000Z" agent="5.0" etag="abc123" version="24.2.5" type="device">
  <diagram name="Notion RAG Chatbot Architecture" id="architecture">
    <mxGraphModel dx="1422" dy="794" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="1169" pageHeight="827" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        
        <!-- AWS Cloud Container -->
        <mxCell id="aws-cloud" value="AWS Cloud" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;fontSize=16;fontStyle=1;verticalAlign=top;spacingTop=10;" vertex="1" parent="1">
          <mxGeometry x="50" y="50" width="1070" height="720" as="geometry" />
        </mxCell>
        
        <!-- User -->
        <mxCell id="user" value="ðŸ‘¤ ì‚¬ìš©ìž" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;fontSize=14;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="20" y="400" width="80" height="60" as="geometry" />
        </mxCell>
        
        <!-- Data Sync Layer -->
        <mxCell id="sync-layer" value="Data Sync Layer" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;fontSize=14;fontStyle=1;verticalAlign=top;spacingTop=10;" vertex="1" parent="1">
          <mxGeometry x="80" y="80" width="480" height="200" as="geometry" />
        </mxCell>
        
        <!-- EventBridge -->
        <mxCell id="eventbridge" value="â° EventBridge&#xa;Scheduler" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;fontSize=12;" vertex="1" parent="1">
          <mxGeometry x="100" y="120" width="100" height="60" as="geometry" />
        </mxCell>
        
        <!-- Lambda Function -->
        <mxCell id="lambda" value="âš¡ Lambda Function&#xa;Notion Sync" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffe6cc;strokeColor=#d79b00;fontSize=12;" vertex="1" parent="1">
          <mxGeometry x="250" y="120" width="120" height="60" as="geometry" />
        </mxCell>
        
        <!-- Notion API -->
        <mxCell id="notion-api" value="ðŸ“ Notion API" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;fontSize=12;" vertex="1" parent="1">
          <mxGeometry x="420" y="120" width="100" height="60" as="geometry" />
        </mxCell>
        
        <!-- S3 Bucket -->
        <mxCell id="s3" value="ðŸ—„ï¸ S3 Bucket&#xa;notion-data/" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;fontSize=12;" vertex="1" parent="1">
          <mxGeometry x="100" y="200" width="120" height="60" as="geometry" />
        </mxCell>
        
        <!-- KnowledgeBase -->
        <mxCell id="knowledgebase" value="ðŸ§  KnowledgeBase&#xa;Vector Store" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1f5fe;strokeColor=#01579b;fontSize=12;" vertex="1" parent="1">
          <mxGeometry x="280" y="200" width="120" height="60" as="geometry" />
        </mxCell>
        
        <!-- OpenSearch Serverless -->
        <mxCell id="opensearch" value="ðŸ” OpenSearch&#xa;Serverless" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e8f5e8;strokeColor=#4caf50;fontSize=12;" vertex="1" parent="1">
          <mxGeometry x="450" y="200" width="100" height="60" as="geometry" />
        </mxCell>
        
        <!-- Chat Service Layer -->
        <mxCell id="chat-layer" value="Chat Service Layer" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d4edda;strokeColor=#28a745;fontSize=14;fontStyle=1;verticalAlign=top;spacingTop=10;" vertex="1" parent="1">
          <mxGeometry x="80" y="320" width="480" height="280" as="geometry" />
        </mxCell>
        
        <!-- Application Load Balancer -->
        <mxCell id="alb" value="âš–ï¸ Application&#xa;Load Balancer" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;fontSize=12;" vertex="1" parent="1">
          <mxGeometry x="100" y="350" width="120" height="60" as="geometry" />
        </mxCell>
        
        <!-- ECS Fargate -->
        <mxCell id="ecs" value="ðŸ³ ECS Fargate&#xa;Streamlit App" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e8f5e8;strokeColor=#4caf50;fontSize=12;" vertex="1" parent="1">
          <mxGeometry x="280" y="350" width="120" height="60" as="geometry" />
        </mxCell>
        
        <!-- Bedrock Claude -->
        <mxCell id="bedrock" value="ðŸ¤– Amazon Bedrock&#xa;Claude 3 Haiku" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff3e0;strokeColor=#ff9800;fontSize=12;" vertex="1" parent="1">
          <mxGeometry x="100" y="450" width="120" height="60" as="geometry" />
        </mxCell>
        
        <!-- Search Methods -->
        <mxCell id="search1" value="ðŸ” ê²€ìƒ‰ ë°©ì‹ 1&#xa;S3 í‚¤ì›Œë“œ ê²€ìƒ‰" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f3e5f5;strokeColor=#9c27b0;fontSize=11;" vertex="1" parent="1">
          <mxGeometry x="280" y="450" width="100" height="50" as="geometry" />
        </mxCell>
        
        <mxCell id="search2" value="ðŸ§  ê²€ìƒ‰ ë°©ì‹ 2&#xa;KnowledgeBase ë²¡í„°" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1f5fe;strokeColor=#01579b;fontSize=11;" vertex="1" parent="1">
          <mxGeometry x="400" y="450" width="100" height="50" as="geometry" />
        </mxCell>
        
        <!-- Sync Control -->
        <mxCell id="sync-control" value="ðŸ”„ ë™ê¸°í™” ì œì–´" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffecb3;strokeColor=#ffa000;fontSize=11;" vertex="1" parent="1">
          <mxGeometry x="280" y="520" width="100" height="40" as="geometry" />
        </mxCell>
        
        <mxCell id="status-check" value="ðŸ“Š ìƒíƒœ í™•ì¸" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffecb3;strokeColor=#ffa000;fontSize=11;" vertex="1" parent="1">
          <mxGeometry x="400" y="520" width="100" height="40" as="geometry" />
        </mxCell>
        
        <!-- Security & Config Layer -->
        <mxCell id="security-layer" value="Security &amp; Configuration" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffebee;strokeColor=#f44336;fontSize=14;fontStyle=1;verticalAlign=top;spacingTop=10;" vertex="1" parent="1">
          <mxGeometry x="600" y="80" width="480" height="520" as="geometry" />
        </mxCell>
        
        <!-- Secrets Manager -->
        <mxCell id="secrets" value="ðŸ” Secrets Manager&#xa;Notion Token" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffcdd2;strokeColor=#f44336;fontSize=12;" vertex="1" parent="1">
          <mxGeometry x="630" y="120" width="120" height="60" as="geometry" />
        </mxCell>
        
        <!-- IAM Roles -->
        <mxCell id="iam" value="ðŸ‘¤ IAM Roles&#xa;ê¶Œí•œ ê´€ë¦¬" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffcdd2;strokeColor=#f44336;fontSize=12;" vertex="1" parent="1">
          <mxGeometry x="780" y="120" width="120" height="60" as="geometry" />
        </mxCell>
        
        <!-- Features Box -->
        <mxCell id="features" value="âœ¨ ì£¼ìš” ê¸°ëŠ¥&#xa;&#xa;â€¢ ì´ì¤‘ ê²€ìƒ‰ ë°©ì‹ ë¹„êµ&#xa;â€¢ ëŒ€í™” ì»¨í…ìŠ¤íŠ¸ ìœ ì§€&#xa;â€¢ ì‹¤ì‹œê°„ ë™ê¸°í™” ìƒíƒœ&#xa;â€¢ ì°¸ê³  ë¬¸ì„œ ë§í¬ ì œê³µ&#xa;â€¢ í†µí•© ë™ê¸°í™” ì œì–´" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e8f5e8;strokeColor=#4caf50;fontSize=11;align=left;spacingLeft=10;" vertex="1" parent="1">
          <mxGeometry x="630" y="220" width="200" height="120" as="geometry" />
        </mxCell>
        
        <!-- Performance Box -->
        <mxCell id="performance" value="âš¡ ì„±ëŠ¥ ì§€í‘œ&#xa;&#xa;â€¢ KnowledgeBase: 3-7ì´ˆ&#xa;â€¢ S3 ê²€ìƒ‰: 2-5ì´ˆ&#xa;â€¢ ëŒ€í™” ì»¨í…ìŠ¤íŠ¸: +1-2ì´ˆ&#xa;â€¢ ë™ì‹œ ì‚¬ìš©ìž: ~100ëª…&#xa;â€¢ ë²¡í„° ì¸ë±ìŠ¤: ìˆ˜ì²œ ë¬¸ì„œ" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff3e0;strokeColor=#ff9800;fontSize=11;align=left;spacingLeft=10;" vertex="1" parent="1">
          <mxGeometry x="860" y="220" width="200" height="120" as="geometry" />
        </mxCell>
        
        <!-- Cost Box -->
        <mxCell id="cost" value="ðŸ’° ì˜ˆìƒ ë¹„ìš© (ì›”ê°„)&#xa;&#xa;â€¢ ECS Fargate: $25&#xa;â€¢ Claude 3 Haiku: $5-20&#xa;â€¢ OpenSearch: $15-30&#xa;â€¢ S3 + Lambda: $5&#xa;â€¢ KnowledgeBase: $10&#xa;â€¢ ê¸°íƒ€: $10&#xa;&#xa;ì´ ì˜ˆìƒ: $70-100" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1f5fe;strokeColor=#01579b;fontSize=11;align=left;spacingLeft=10;" vertex="1" parent="1">
          <mxGeometry x="630" y="370" width="200" height="150" as="geometry" />
        </mxCell>
        
        <!-- Tech Stack Box -->
        <mxCell id="tech-stack" value="ðŸ› ï¸ ê¸°ìˆ  ìŠ¤íƒ&#xa;&#xa;Frontend:&#xa;â€¢ Streamlit&#xa;&#xa;Backend:&#xa;â€¢ ECS Fargate&#xa;â€¢ Lambda&#xa;â€¢ S3&#xa;&#xa;AI/ML:&#xa;â€¢ Bedrock KnowledgeBase&#xa;â€¢ OpenSearch Serverless&#xa;â€¢ Titan Embeddings&#xa;&#xa;Infrastructure:&#xa;â€¢ AWS CDK&#xa;â€¢ Docker" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f3e5f5;strokeColor=#9c27b0;fontSize=10;align=left;spacingLeft=10;" vertex="1" parent="1">
          <mxGeometry x="860" y="370" width="200" height="200" as="geometry" />
        </mxCell>
        
        <!-- Data Flow Arrows -->
        <!-- EventBridge to Lambda -->
        <mxCell id="arrow1" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;strokeColor=#666666;" edge="1" parent="1" source="eventbridge" target="lambda">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="label1" value="1ì‹œê°„ë§ˆë‹¤ íŠ¸ë¦¬ê±°" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="200" y="100" width="80" height="20" as="geometry" />
        </mxCell>
        
        <!-- Lambda to Notion API -->
        <mxCell id="arrow2" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;strokeColor=#666666;" edge="1" parent="1" source="lambda" target="notion-api">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="label2" value="ë°ì´í„° ì¶”ì¶œ" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="370" y="100" width="60" height="20" as="geometry" />
        </mxCell>
        
        <!-- Lambda to S3 -->
        <mxCell id="arrow3" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;strokeColor=#666666;" edge="1" parent="1" source="lambda" target="s3">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="label3" value="JSON ì €ìž¥" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="180" y="180" width="60" height="20" as="geometry" />
        </mxCell>
        
        <!-- S3 to KnowledgeBase -->
        <mxCell id="arrow4" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;strokeColor=#666666;" edge="1" parent="1" source="s3" target="knowledgebase">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="label4" value="ìžë™ ë™ê¸°í™”" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="200" y="270" width="70" height="20" as="geometry" />
        </mxCell>
        
        <!-- KnowledgeBase to OpenSearch -->
        <mxCell id="arrow5" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;strokeColor=#666666;" edge="1" parent="1" source="knowledgebase" target="opensearch">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="label5" value="ë²¡í„° ì¸ë±ì‹±" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="380" y="270" width="70" height="20" as="geometry" />
        </mxCell>
        
        <!-- User to ALB -->
        <mxCell id="arrow6" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=3;strokeColor=#4caf50;" edge="1" parent="1" source="user" target="alb">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="label6" value="ì§ˆë¬¸ ìž…ë ¥" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=10;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="110" y="380" width="60" height="20" as="geometry" />
        </mxCell>
        
        <!-- ALB to ECS -->
        <mxCell id="arrow7" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;strokeColor=#666666;" edge="1" parent="1" source="alb" target="ecs">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="label7" value="ìš”ì²­ ì „ë‹¬" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="200" y="330" width="60" height="20" as="geometry" />
        </mxCell>
        
        <!-- ECS to Search Methods -->
        <mxCell id="arrow8" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;strokeColor=#9c27b0;" edge="1" parent="1" source="ecs" target="search1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        
        <mxCell id="arrow9" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;strokeColor=#01579b;" edge="1" parent="1" source="ecs" target="search2">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        
        <!-- ECS to Bedrock -->
        <mxCell id="arrow10" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;strokeColor=#ff9800;" edge="1" parent="1" source="ecs" target="bedrock">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="label10" value="ë‹µë³€ ìƒì„±" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="190" y="430" width="60" height="20" as="geometry" />
        </mxCell>
        
        <!-- ECS to Sync Control -->
        <mxCell id="arrow11" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;strokeColor=#ffa000;" edge="1" parent="1" source="ecs" target="sync-control">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        
        <mxCell id="arrow12" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;strokeColor=#ffa000;" edge="1" parent="1" source="ecs" target="status-check">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        
        <!-- Security connections -->
        <mxCell id="arrow13" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=1;strokeColor=#f44336;dashed=1;" edge="1" parent="1" source="secrets" target="lambda">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        
        <mxCell id="arrow14" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=1;strokeColor=#f44336;dashed=1;" edge="1" parent="1" source="secrets" target="ecs">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        
        <mxCell id="arrow15" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=1;strokeColor=#f44336;dashed=1;" edge="1" parent="1" source="iam" target="ecs">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        
        <mxCell id="arrow16" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=1;strokeColor=#f44336;dashed=1;" edge="1" parent="1" source="iam" target="lambda">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        
        <mxCell id="arrow17" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=1;strokeColor=#f44336;dashed=1;" edge="1" parent="1" source="iam" target="knowledgebase">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
